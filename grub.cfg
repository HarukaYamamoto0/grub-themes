# Mock grub.cfg for theme development and testing

# --- Global Settings ---
set theme_name="girl-looking-at-the-screen"
set timeout=5
set timeout_style=menu
set default="0"

# --- Environment Setup ---
if [ -s $prefix/grubenv ]; then
  load_env
fi

# Set ID option if supported
if [ x"${feature_menuentry_id}" = xy ]; then
  menuentry_id_option="--id"
else
  menuentry_id_option=""
fi
export menuentry_id_option

# --- Video & Modules ---
function load_video {
  if [ x$feature_all_video_module = xy ]; then
    insmod all_video
  else
    insmod efi_gop
    insmod efi_uga
    insmod ieee1275_fb
    insmod vbe
    insmod vga
    insmod video_bochs
    insmod video_cirrus
  fi
}

insmod part_gpt
insmod ext2
insmod png
insmod gfxmenu
insmod gfxterm

# Mock root device
search --no-floppy --fs-uuid --set=root 11111111-2222-3333-4444-555555555555

# --- Visual Configuration ---
font="/usr/share/grub/unicode.pf2"
if loadfont $font ; then
  set gfxmode=1920x1080
  load_video
fi
terminal_output gfxterm

# Load theme fonts
loadfont $prefix/themes/$theme_name/fonts/NotoSans24.pf2
loadfont $prefix/themes/$theme_name/fonts/NotoSans28.pf2

# Set theme path
set theme=$prefix/themes/$theme_name/theme.txt
export theme

# --- Menu Entries ---

menuentry 'Linux Mint 22.3 Cinnamon' --class linuxmint --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-simple-demo' {
  echo 'Mock boot: Linux Mint 22.3 Cinnamon'
  echo 'Kernel and initrd loading skipped (QEMU theme test)'
  sleep 3
}

submenu 'Advanced options for Linux Mint 22.3 Cinnamon' $menuentry_id_option 'gnulinux-advanced-demo' {
  menuentry 'Linux Mint (recovery mode)' {
    echo 'Mock boot: recovery mode'
    sleep 3
  }
  menuentry 'Linux Mint (older kernel)' {
    echo 'Mock boot: older kernel'
    sleep 3
  }
}

menuentry 'Windows Boot Manager' --class windows --class os $menuentry_id_option 'osprober-efi-demo' {
  echo 'Mock boot: Windows Boot Manager'
  sleep 3
}

if [ "$grub_platform" = "efi" ]; then
  menuentry 'UEFI Firmware Settings' {
    fwsetup
  }
fi

menuentry "Reboot" --class restart {
  reboot
}

menuentry "Shutdown" --class shutdown {
  halt
}
